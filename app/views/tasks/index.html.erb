<% if user_signed_in?%>
  <p style="color: green"><%= notice %></p>

  <h1>Tasks</h1>
  <%= link_to "New task", new_task_path, type:"button", id: "btn-add", class: "btn btn-lg btn-primary" %>
  <div id="tasks">
    <% @tasks.all.order('created_at DESC').each do |task| %>
      <% if current_user.id == task.user_id && task.completed == false%>
        <div id="<%= dom_id task %>" class="task">

        <%=button_to " ", complete_path(:task => task), style: "height:20px;width:20px;border-radius:20px;" %>
        <strong>Title:</strong>
        <%= task.title %>
        <br/>
        <strong>Due:</strong>
        <%= task.due %>
        <% if user_signed_in?%>
          <strong>User id:</strong>
          <%= task.user_id %>
        <%end%>
        <strong>Completed:</strong>
        <%= task.completed %>
        <p>
          <%= link_to "Show this task", task, class: 'link' %>
        </p>
      </div>

      <%end%>  
    <% end %>
  </div>

  <h1>Completed tasks</h1>
  <div id="completed-tasks">
    <% @tasks.all.order('completed_time DESC').reject{|task| task.completed_time.nil?}.each do |task| %>
      <% if current_user.id == task.user_id && task.completed == true%>
        <div id="<%= dom_id task %>" class="task">
        <%=button_to " ", uncomplete_path(:task => task), style: "height:20px;width:20px;border-radius:20px;" %>
        <strong>Title:</strong>
        <%= task.title %>
        <br/>
        <strong>Completed:</strong>
        <%= task.completed %>
        <p>
          <%= link_to "Show this task", task, class: 'link' %>
        </p>
      </div>

      <%end%>  
    <% end %>
  </div>

<%end%>

